---
postgres_version: '15'

pg_bkp_base_path: '/srv/exploit/backup/postgres'
pg_bkp_dump_target_dir: '{{ pg_bkp_base_path }}/dump'
pg_bkp_conf_target_dir: '{{ pg_bkp_base_path }}/conf'

# Postgres configuration
postgres_acl:
  - database: toto
    type: host
    user: toto
    address: '192.168.0.11/32'
    method: 'scram-sha-256'

##########################################
# Postgres configurations
##########################################
# Postgres general configurations
postgres_listen_addr: '127.0.0.1'
postgres_listen_port: '5432'
#postgres_max_connections: '100'

## Postgres Authentication
#postgres_password_encryption: 'scram-sha-256'
#postgres_db_user_namespace: 'off'
postgres_ssl_enable: true
#postgres_ssl_ca_file: ''
#postgres_ssl_cert_file: '/etc/ssl/certs/ssl-cert-snakeoil.pem'
#postgres_ssl_crl_file: ''
#postgres_ssl_crl_dir: ''
#postgres_ssl_key_file: '/etc/ssl/private/ssl-cert-snakeoil.key'
#postgres_ssl_ciphers: 'HIGH:!aNULL'
postgres_ssl_prefer_server_ciphers: true
#postgres_ssl_ecdh_curve: 'prime256v1'
#postgres_ssl_min_vers: 'TLSv1.2'
#postgres_ssl_dh_params_file: ''

# Postgres Resource usage
#postgres_shared_buffers: '128MB'
#postgres_temp_buffers: '8MB'
#postgres_max_prepared_transactions: '0'
#postgres_work_mem: '4MB'
#postgres_maintenance_work_mem: '64MB'
#postgres_autovacuum_work_mem: '-1'
#postgres_logical_decoding_work_mem: '64MB'
#postgres_max_stack_depth: '100kB'
#postgres_shared_memory_type: 'mmap'
#postgres_dynamic_shared_memory_type: 'posix'
#postgres_min_dynamic_shared_memory: '0MB'

## Postgres Kernel resources
#postgres_max_files_per_process: '1000'

## Postgres Cost based vacuum delay
#postgres_vacuum_cost_delay: '0'
#postgres_vacuum_cost_page_hit: '1'
#postgres_vacuum_cost_page_miss: '2'
#postgres_vacuum_cost_page_dirty: '20'
#postgres_vacuum_cost_limit: '200'

## Postgres bgwriter
#postgres_bgwriter_delay: '200ms'
#postgres_bgwriter_lru_maxpages: '100'
#postgres_bgwriter_lru_multiplier: '2.0'
#postgres_bgwriter_flush_after: '512kB'

## Postgres Ansynchronous behavior
#postgres_backend_flush_after: '0'
#postgres_effective_io_concurrency: '1'
#postgres_maintenance_io_concurrency: '10'
#postgres_max_worker_processes: '8'
#postgres_max_parallel_workers_per_gather: '2'
#postgres_max_parallel_maintenance_workers: '2'
#postgres_max_parallel_workers: '8'
#postgres_parallel_leader_participation: 'on'
#postgres_old_snapshot_threshold: '-1'

# Postgres Write ahead logs
#postgres_wal_level: 'replica'
#postgres_wal_log_hints: 'off'
#postgres_wal_compression: 'off'
#postgres_wal_buffers: '-1'
#postgres_wal_writer_delay: '200ms'
#postgres_wal_writer_flush_after: '1MB'
#postgres_wal_skip_threshold: '2MB'
#postgres_commit_delay: '0'
#postgres_commit_siblings: '5'

## Postgres Checkpoints
#postgres_checkpoint_timeout: '5min'
#postgres_checkpoint_completion_target: '0.9'
#postgres_checkpoint_flush_after: '256kB'
#postgres_checkpoint_warning: '30s'
#postgres_max_wal_size: '1GB'
#postgres_min_wal_size: '80MB'

# Query Tuning
## Postgres Planner method configuration
#postgres_enable_gathermerge: 'on'
#postgres_enable_parallel_append: 'on'
#postgres_enable_parallel_hash: 'on'
#postgres_enable_partition_pruning: 'on'
#postgres_enable_partitionwise_join: 'off'
#postgres_enable_partitionwise_aggregate: 'off'
#postgres_enable_incremental_sort: 'on'
#postgres_enable_async_append: 'on'
#postgres_enable_memoize: 'on'
#postgres_enable_bitmapscan: 'on'
#postgres_enable_hashagg: 'on'
#postgres_enable_hashjoin: 'on'
#postgres_enable_indexscan: 'on'
#postgres_enable_indexonlyscan: 'on'
#postgres_enable_material: 'on'
#postgres_enable_mergejoin: 'on'
#postgres_enable_nestloop: 'on'
#postgres_enable_seqscan: 'on'
#postgres_enable_sort: 'on'
#postgres_enable_tidscan: 'on'

## Postgres Planner cost constants
#postgres_seq_page_cost: '1.0'
#postgres_random_page_cost: '4.0'
#postgres_cpu_tuple_cost: '0.01'
#postgres_cpu_index_tuple_cost: '0.005'
#postgres_cpu_operator_cost: '0.0025'
#postgres_parallel_setup_cost: '1000.0'
#postgres_parallel_tuple_cost: '0.1'
#postgres_min_parallel_table_scan_size: '8MB'
#postgres_min_parallel_index_scan_size: '512kB'
#postgres_effective_cache_size: '4GB'
#postgres_jit_above_cost: '100000'
#postgres_jit_inline_above_cost: '500000'
#postgres_jit_optimize_above_cost: '500000'

## Postgres Genetic query optimizer
#postgres_geqo: 'on'
#postgres_geqo_threshold: '12'
#postgres_geqo_effort: '5'
#postgres_geqo_pool_size: '0'
#postgres_geqo_generations: '0'
#postgres_geqo_selection_bias: '2.0'
#postgres_geqo_seed: '0.0'

## Postgres Other planner options
#postgres_default_statistics_target: '100'
#postgres_constraint_exclusion: 'partition'
#postgres_cursor_tuple_fraction: '0.1'
#postgres_from_collapse_limit: '8'
#postgres_join_collapse_limit: '8'
#postgres_plan_cache_mode: 'auto'
#postgres_recursive_worktable_factor: '10.0'

# Postgres reporting and logging
## Postgres Where to log
#postgres_log_destination: 'stderr'
#postgres_logging_collectior: 'off'
#postgres_log_directory: 'log'
#postgres_log_filename: 'postgresql-%Y-%m-%d_%H%M%S.log'
#postgres_log_file_mode: '0600'
#postgres_log_rotation_age: '1d'
#postgres_log_rotation_size: '10MB'
#postgres_log_truncute_on_rotation: 'off'
#postgres_syslog_facility: 'LOCAL0'
#postgres_syslog_ident: 'postgres'
#postgres_syslog_sequence_numbers: 'on'
#postgres_syslog_split_messages: 'on'

## Postgres When to log
#postgres_log_min_message: 'warning'
#postgres_log_min_error_statement: 'error'
#postgres_log_min_duration_statement: '2000'
#postgres_log_min_duration_sample: '-1'
#postgres_log_statement_sample_rate: '1.0'
#postgres_log_transaction_sample_rate: '0.0'
#postgres_log_startup_progress_interval: '10s'

## Postgres What to log
#postgres_debug_print_parse: 'off'
#postgres_debug_print_rewritten: 'off'
#postgres_debug_print_plan: 'off'
#postgres_debug_pretty_print: 'on'
#postgres_log_autovacuum_min_durication: '10min'
#postgres_log_checkpoints: 'on'
#postgres_log_connections: 'on'
#postgres_log_disconnections: 'on'
#postgres_log_duration: 'on'
#postgres_log_error_verbosity: 'default'
#postgres_log_hostname: 'on'
#postgres_log_line_prefix: '%m [%p] %q%u@%d '
#postgres_log_lock_waits: 'on'
#postgres_log_recovery_conflict_waits: 'on'
#postgres_log_parameter_max_lenght: '-1'
#postgres_log_parameter_max_length_on_error: '-1'
#postgres_log_statement: 'none'
#postgres_log_temp_files: '-1'

# Postgres Process Title
#postgres_cluster_name: '{{ postgres_version }}/main'
#postgres_update_process_title: 'on'

# Postgres Statistics
## Postgres Cumulative Query and index statistics
#postgres_track_activities: 'on'
#postgres_track_activity_query_size: '1024'
#postgres_track_counts: 'on'
#postgres_track_io_timing: 'on'
#postgres_track_wal_io_timing: 'off'
#postgres_track_functions: 'none'
#postgres_stats_fetch_consistency: 'cache'

## Postgres Monitoring
#postgres_compute_query_id: 'auto'
#postgres_log_statement_stats: 'off'
#postgres_log_parser_stats: 'off'
#postgres_log_planner_stats: 'off'
#postgres_log_executor_stats: 'off'

# Postgres autovacuum
#postgres_autovacuum: 'on'
#postgres_autovacuum_max_workers: '3'
#postgres_autovacuum_naptime: '1min'
#postgres_autovacuum_vacuum_threshold: '50'
#postgres_autovacuum_analyze_threshold: '50'
#postgres_autovacuum_vacuum_scale_factor: '0.2'
#postgres_autovacuum_analyze_scale_factor: '0.1'
#postgres_autovacuum_freeze_max_age: '200000000'
#postgres_autovacuum_multixact_freeze_max_age: '400000000'
#postgres_autovacuum_vacuum_cost_delay: '2ms'
#postgres_autovacuum_vacuum_cost_limit: '-1'
#postgres_autovacuum_vacuum_insert_threshold: '1000'
#postgres_autovacuum_vacuum_insert_scale_factor: '0.2'

# Postgres Client connection defaults
## Postgres Statement behavior
#postgres_client_min_message: 'notice'
#postgres_search_path: '"$user", public'
#postgres_default_table_access_method: 'heap'
#postgres_default_tablespace: ''
#postgres_default_toast_compression: 'pglz'
#postgres_vacuum_failsafe_age: 1600000000
#postgres_default_tablespaces: ''
#postgres_check_function_bodies: 'on'
#postgres_default_transaction_isolation: 'read committed'
#postgres_default_transaction_read_only: 'off'
#postgres_default_transaction_deferrable: 'off'
#postgres_session_replication_role: 'origin'
#postgres_statement_timeout: '0'
#postgres_lock_timeout: '0'
#postgres_idle_in_transaction_session_timeout: '0'
#postgres_idle_session_timeout: '0'
#postgres_vacuum_freeze_table_age: '150000000'
#postgres_vacuum_freeze_min_age: '50000000'
#postgres_vacuum_multixact_freeze_table_age: '150000000'
#postgres_vacuum_multixact_freeze_min_age: '5000000'
#postgres_vacuum_multixact_failsafe_age: '1600000000'
#postgres_bytea_output: 'hex'
#postgres_xmlbinary: 'base64'
#postgres_xmloption: 'content'
#postgres_gin_pending_list_limit: '4MB'

## Postgres Locale and formattingq
#postgres_datestyle: 'iso, mdy'
#postgres_intervalstyle: 'postgres'
#postgres_timezone: 'UTC'
#postgres_timezone_abbreviations: 'Default'
#postgres_client_encoding: 'sql_ascii'
#postgres_locale: 'en_US.UTF-8'
#postgres_default_text_search_config: 'pg_catalog.english'

## Postgres Shared library preloading
#postgres_local_preload_libraries: ''
#postgres_session_preload_libraries: ''
#postgres_shared_preload_libraries: ''
#postgres_jit_provider: 'llvmjit'

## Postgres Other defaults
#postgres_dynamic_library_path: '$libdir'
#postgres_gin_fuzzy_search_limit: '0'

# Postgres Lock management
#postgres_deadlock_timeout: '1s'
#postgres_max_locks_per_transaction: '64'
#postgres_max_pred_locks_per_transaction: '64'
#postgres_max_pred_locks_per_relation: '-2'
#postgres_max_pred_locks_per_page: '2'

# Postgres Version and platform compatibility
## Postgres Previous postgresql versions
#postgres_array_nulls: 'on'
#postgres_backslash_quote: 'safe_encoding'
#postgres_escape_string_warning: 'on'
#postgres_lo_compat_privileges: 'off'
#postgres_quote_all_identifiers: 'off'
#postgres_standard_conforming_strings: 'on'
#postgres_synchronize_seqscans: 'on'

## Postgres Other platforms and clients
#postgres_transform_null_equals: 'off'

# Postgres error handling
#postgres_exit_on_error: 'off'
#postgres_restart_after_crash: 'on'
#postgres_data_sync_retry: 'off'
#postgres_recovery_init_sync_method: 'fsync'
